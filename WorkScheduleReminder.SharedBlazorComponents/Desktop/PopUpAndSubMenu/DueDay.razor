<MudPaper Class="d-flex flex-column flex-wrap gap-2 pa-2"
		  Style="border-radius:20px;"
		  Elevation="0">
	<MudDateRangePicker DateRange="dateRange"
						PickerVariant="PickerVariant.Static"
						AutoClose="false"
						Editable="true"
						DateFormat="dd/MM/yyyy"
						TitleDateFormat="dd/MM/yyyy"
						DateRangeChanged="(()=>{selectedChip = null;})">
		<PickerActions>
			<MudChipSet @bind-SelectedChip="selectedChip"
						Class="d-flex flex-grow-1"
						Filter="true"
						Mandatory="true">
				<MudPaper Class="d-flex pa-2 justify-space-between"
						  Elevation="0"
						  Width="100%">
					<MudChip Class="d-flex flex-wrap rounded-pill"
							 Size="Size.Small"
							 Variant="Variant.Text"
							 Text="Overdue"
							 OnClick="(()=>SetDateRange(DateTime.MinValue, DateTime.Now.Date))" />
					<MudChip Class="d-flex flex-wrap rounded-pill"
							 Size="Size.Small"
							 Variant="Variant.Text"
							 Text="Today"
							 OnClick="(()=>SetDateRange(DateTime.Now.Date, DateTime.Now.Date))" />
					<MudChip Class="d-flex flex-wrap rounded-pill"
							 Size="Size.Small"
							 Variant="Variant.Text"
							 Text="This week"
							 OnClick="(()=>SetWeekRange(DateTime.Now.Date))" />
					<MudChip Class="d-flex flex-wrap rounded-pill"
							 Size="Size.Small"
							 Variant="Variant.Text"
							 Text="Next week"
							 OnClick="(()=>SetWeekRange(DateTime.Now.AddDays(7).Date))" />
					<MudChip Class="d-flex flex-wrap rounded-pill"
							 Size="Size.Small"
							 Variant="Variant.Text"
							 Text="This month"
							 OnClick="(()=>SetMonthRange(DateTime.Now.Date))" />
					<MudChip Class="d-flex flex-wrap rounded-pill"
							 Size="Size.Small"
							 Variant="Variant.Text"
							 Text="Next month"
							 OnClick="(()=>SetMonthRange(DateTime.Now.AddDays(DateTime.DaysInMonth(DateTime.Now.Year, DateTime.Now.Month)).Date))" />
					<MudChip Class="d-flex flex-wrap rounded-pill"
							 Size="Size.Small"
							 Variant="Variant.Text"
							 Text="None"
							 OnClick="(()=>{dateRange=new DateRange();})" />
				</MudPaper>
			</MudChipSet>
		</PickerActions>
	</MudDateRangePicker>
</MudPaper>

@code
{
	private DateRange dateRange = new DateRange();
	private MudChip? selectedChip { get; set; }
	private void SetDateRange(DateTime begin, DateTime end)
	{
		dateRange = new DateRange(begin, end);
	}
	//input a day of a week
	private void SetWeekRange(DateTime dt)
	{
		int startOfWeek = (7 + (dt.DayOfWeek - DayOfWeek.Sunday)) % 7;
		int endOfWeek = (7 + (DayOfWeek.Saturday - dt.DayOfWeek)) % 7;
		SetDateRange(dt.AddDays(-1 * startOfWeek).Date, dt.AddDays(1 * endOfWeek).Date);
	}
	//input a day of a month
	private void SetMonthRange(DateTime dt)
	{
		int daysInMonth = DateTime.DaysInMonth(dt.Year, dt.Month);
		DateTime endOfMonth = new DateTime(dt.Year, dt.Month, daysInMonth);
		DateTime startOfMonth = new DateTime(dt.Year, dt.Month, 1);
		SetDateRange(startOfMonth, endOfMonth);
	}
}
