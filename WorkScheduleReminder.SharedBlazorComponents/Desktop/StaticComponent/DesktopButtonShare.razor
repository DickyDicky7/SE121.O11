@using WorkScheduleReminder.SharedBlazorComponents.Desktop.PopUpAndSubMenu

<MudPaper Class="d-flex flex-row flex-wrap gap-2 pa-2 align-center"
          Elevation="0">
    @if (Type == Helper.ViewType.DefaultView)
    {
        <MudSwitch Checked="SwitchChecked"
                   Label="@Text"
                   Color="Color.Tertiary"
                   ThumbIcon="@Icons.Material.Filled.Workspaces"
                   CheckedChanged="((bool _) => OnSwitchCheckedChanged(_))" />
    }
    else if (Type == Helper.ViewType.CustomView)
    {
        <MudText Style="font-size:small;font-weight:100;">
            Private view
        </MudText>
    }
    else if (Type == Helper.ViewType.WorkspaceView)
    {
        <MudButton Class=""
                   StartIcon="@Icons.Material.Filled.Share"
                   Size="Size.Small"
                   OnClick="ToggleVisible">
            <MudText>
                Share
            </MudText>
        </MudButton>
        <MudOverlay Visible="IsVisible"
                    DarkBackground="true"
                    AutoClose="true"
                    OnClick="ToggleVisible">
            <Invite @onclick:stopPropagation />
        </MudOverlay>
    }
</MudPaper>

@code
{
    [Parameter]
    public Helper.ViewType Type { get; set; }
    [Parameter]
    public bool SwitchChecked { get; set; } = false;

    public string Text { get; set; } = "Individual";
    public bool IsVisible { get; set; } = false;

    public void OnSwitchCheckedChanged(bool _)
    {
        SwitchChecked = !
        SwitchChecked;
        if (SwitchChecked)
        {
            Text = "Workspace";
        }
        else
        {
            Text = "Individual";
        }
    }

    public void ToggleVisible()
    {
        IsVisible = !
        IsVisible;
    }
}
