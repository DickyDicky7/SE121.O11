@using WorkScheduleReminder.SharedBlazorComponents.Desktop.PopupAndSubMenus

<MudPaper Class="d-flex flex-row flex-wrap gap-2 pa-2 align-center"
		  Elevation="0">
	@if (ActiveViewType == Helper.ViewType.DefaultView)
	{
		<MudSwitch Checked="SwitchChecked"
				   Label="@Text"
				   Color="Color.Tertiary"
				   ThumbIcon="@Icons.Material.Filled.Workspaces"
				   CheckedChanged="((bool _) => OnSwitchCheckedChanged(_))" />
	}
	else if (ActiveViewType == Helper.ViewType.CustomView)
	{
		<MudText Style="font-size:small;font-weight:100;">
			Private view
		</MudText>
	}
	else if (ActiveViewType == Helper.ViewType.WorkspaceView)
	{
		<MudButton Class=""
				   StartIcon="@Icons.Material.Filled.People"
				   Size="Size.Small"
				   OnClick="ToggleMemberVisible">
			<MudText>
				Member
			</MudText>
		</MudButton>
	}
</MudPaper>
<MudOverlay Visible="MemberVisible"
			DarkBackground="true"
			AutoClose="true"
			OnClick="ToggleMemberVisible">
	<PopupMenuMember @onclick:stopPropagation />
</MudOverlay>

@code
{
	[CascadingParameter(Name = nameof(ActiveViewType))]
	public Helper.ViewType ActiveViewType { get; set; }
	[Parameter]
	public bool             SwitchChecked { get; set; } = false;

	public string Text { get; set; } = "Individual";
	public bool MemberVisible { get; set; } = false;

	public void OnSwitchCheckedChanged(bool _)
	{
		SwitchChecked = !
		SwitchChecked;
		if (SwitchChecked)
		{
			Text =  "Workspace";
		}
		else
		{
			Text = "Individual";
		}
	}

	public void ToggleMemberVisible()
	{
		MemberVisible = !
		MemberVisible;
	}
}
