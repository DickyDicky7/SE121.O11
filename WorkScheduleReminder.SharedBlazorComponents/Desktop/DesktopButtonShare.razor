@using WorkScheduleReminder.SharedBlazorComponents.Desktop.PopUpAndSubMenu
<MudPaper Class="d-flex flex-row flex-wrap gap-2 pa-2 align-center"
          Elevation="0">
    @if (Type == Helper.ViewType.DefaultView)
    {
        <MudSwitch Checked="SwitchChecked"
                   Style="font-family:inherit;"
                   Label="@Text"
                   Color="Color.Tertiary"
                   ThumbIcon="@Icons.Material.Filled.Workspaces" 
                   CheckedChanged="((bool a)=>OnSwitchCheckedChanged())"/>
    }
    else if (Type == Helper.ViewType.CustomView)
    {
        <MudText Style="font-family:inherit; font-size:small;font-weight:100;">
            Private view
        </MudText>
    }
    else if (Type == Helper.ViewType.WorkspaceView)
    {
        <MudButton Class=""
                   StartIcon="@Icons.Material.Filled.Share"
                   Size="Size.Small"
                   OnClick="(()=>{isVisible = !isVisible;})">
            <MudText Style="font-family:inherit;">
                Share
            </MudText>
        </MudButton>
        <MudOverlay Class="border-2"
                    Visible="isVisible"
                    DarkBackground="true"
                    AutoClose="true"
                    OnClick="(()=>{isVisible=!isVisible;})">
            <Invite @onclick:stopPropagation />
        </MudOverlay>
    }
</MudPaper>

@code {
    private string Text = "Individual";
    [Parameter]
    public Helper.ViewType Type { get; set; }
    [Parameter]
    public bool SwitchChecked { get; set; } = false;
    private bool isVisible { get; set; } = false;
    private void OnSwitchCheckedChanged()
    {
        SwitchChecked = !SwitchChecked;
        if (SwitchChecked)
        {
            Text = "Workspace";
        }
        else
        {
            Text = "Individual";
        }
    }
}
